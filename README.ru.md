**Прочитать эту страницу по-русски** | [Read this page in English](https://github.com/vazhka-dolya/Shapeshift/blob/main/README.md)

# Shapeshift
**Shapeshift** — очень экспериментальный адд-он для [Mario 64 Movie Maker 3](https://github.com/projectcomet64/M64MM), позволяющий менять модель Марио в реальном времени.

<p align="center">
  <img src="https://github.com/vazhka-dolya/Shapeshift/blob/main/GitHubImg/shapeshift_demo1.gif"/>
</p>

# Использование
На данный момент этот адд-он работает только с моделями, которые хранятся на адресе `F0860`, и это обычно старые модели, по типу [Пич от Enkal'а](https://www.youtube.com/watch?v=itgn6dsmcNA). Это означает, что, к сожалению, [Fast64](https://github.com/Fast-64/fast64)-модели на данный момент не поддерживаются.

Настоятельно рекомендуется с этим адд-оном использовать расширенный ROM. Вы можете расширить свой ROM через [SM64 ROM Manager](https://pilzinsel64.de/sm64-rom-manager/).

Некоторые советы/примечания:
- так как адд-он загружает модели в другой адрес, то использовать что-нибудь типа [katarakta PT4](https://github.com/vazhka-dolya/katarakta/releases/tag/vpt4) или в будущем kataraktaCS по умолчанию не получится. Но Вы можете поменять текстуры в модели и после этого уже её сохранить, благодаря чему у модели при загрузке останутся новые текстуры;
- если Вы используете ROM, где по умолчанию стоит Fast64-модель, то Вы всё ещё можете использовать Shapeshift для замены этой модели на другую;
- после загрузки модели поверх Марио, Вы можете использовать кнопку **Вернуть Марио**, чтобы вернуть изначальную модель Марио. Если же Вы загружали модель поверх Fast64-модели, то используйте кнопку **Вернуть F64-модель**;
- Вам необходим расширенный ROM для извлечения обычной, оригинальной модели Марио;
- если с заменённой моделью перейти на другую локацию, то модель сбросится на оригинальную;
  - для этого есть решение, которое возможно будет добавлено в будущем обновлении.

# Установка и использование
1. Убедитесь, что у Вас установлена [последняя версия](https://github.com/projectcomet64/M64MM/releases/latest) M64MM3.
2. Скачайте [последнюю версию](https://github.com/vazhka-dolya/Shapeshift/releases/latest) этого адд-она. Она будет в архиве.
3. Распакуйте содержимое[^1] скачанного архива в коренную папку[^2] M64MM3. Если Вас запросит заменить файлы, то соглашайтесь.
4. Это всё.

# Требования для компиляции
<details>
  <summary>Нажмите сюда, чтобы развернуть</summary>
  
- Visual Studio 2022;
- репозиторий M64MM3 в папке под названием `M64MM`, которая находится на одну директорию выше;
  - пример: если `.sln`-файл Shapeshift — `C:/projects/Shapeshift/Shapeshift.sln`, то весь репозиторий M64MM3 должен быть в `C:/projects/M64MM`. Желательно, чтобы у путей не было кириллицы;
- если Вы на Windows, то перед тем, как распаковывать архивы, нажмите правой кнопкой мыши по ним, откройте **Свойства** и посмотрите есть ли опция **Разблокировать**. Если есть, то поставьте на ней галочки и нажмите **Применить**. Если Вы этого не сделаете и архив(-ы) останутся заблокированными, то Вы можете столкнуться с проблемами;
- *в зависимости от ситуации*, Вам *возможно* нужно будет сделать следующее: зайдите в **Меню** > **Средства** > **Диспетчер пакетов NuGet** > **Консоль диспетчера пакетов** и введите `Install-Package HtmlRenderer.WinForms`. После этого, зайдите **Меню** > **Проект** > **Управление пакетами NuGet…** и убедитесь, что у `HtmlRenderer.Core` и `HtmlRenderer.WinForms` последние версии.

</details>

# Благодарность
• Kaze Emanuar & Net64 — оригинальный код для извлечения моделей (вроде как, этот код именно от них);
• Warioplier — дал знать об этом коде и поверхностно объяснил, как им пользоваться.

[^1]: Это значит *всё* содержимое, включая папку `deps`. Если адд-он вылетает при попытке открыть окно **Об адд-оне**, то убедитесь, что у Вас есть файлы `HtmlRenderer.dll` и `HtmlRenderer.WinForms.dll` в папке `deps` в M64MM3.
[^2]: Это та же папка, где хранится и `M64MM.exe`.
